2002-01-04  Jody Goldberg <jody@gnome.org>

	* configure.in (CFLAGS) : do no use continuation characters.  It
	  irritates auto*/sed on my system.

2002-01-04  Mikael Hallendal  <micke@codefactory.se>

	* TODO: updated, moved issues to bugzilla.

2001-12-27  Duarte Loreto <happyguy_pt@hotmail.com>

        * configure.in: Added portuguese to ALL_LINGUAS

2001-12-22  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c:
	(yw_close_window_cb): added. yelp-base should listen to
	  destroy-signal of all windows, so it knows when to quit.
	- Added Close window in File menu

2001-12-12  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yw_populate): add Accel group.
	(yw_create_toolbar): added tooltips, needs update

2001-12-11  Stanislav Visnovsky  <visnovsky@nenya.ms.mff.cuni.cz>

	* configure.in: Adde "sk" to ALL_LINGUAS.

2001-12-10  Kjartan Maraas  <kmaraas@gnome.org>

	* configure.in: Added "no" to ALL_LINGUAS.
	
2001-12-10  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yw_class_init): added signal for new window.
	(yw_new_window_cb): amit new_window_requested-signal

	* src/yelp-base.c:
	(yelp_base_new_window_cb): added, listens for new_window_requested
	  from windows.
	(yelp_base_new_window): connect to signal in gtk-window.

	* TODO (FEATURES): updated
	

	* src/yelp-window.c: Some fixes after discussion with seth.
	(yw_init): Yelp: GNOME Help Browser -> Help Browser.
	(yw_populate): readded the menu
	(yw_close_cb): removed
	(yw_new_window_cb): readded
	(yw_exit_cb): readded
	(yw_about_cb): readded
	(yw_create_toolbar): removed the Close-button

	* configure.in: changed Yelp->yelp in AM_INIT_AUTOMAKE.

	* src/yelp-view-home.c (yelp_view_home_new): 
	- updated color to white background, less difference between the
	  views now.

	* src/yelp-window.c: 
	- cleaned up a little.
	- now has tree views (home/content/index) in a Notebook
	- First shows the Home-page, when click a link in it, swap to
	  content-view.
	(yw_populate): only set up the notebook, other code moved to the
	  three views.
	(yw_create_toolbar): new function, creates the toolbar.

	* src/yelp-view-index.[ch]: 
	- added
	- this handles the index view (with index-term searching to the
	  left).
	- not finished.

	* src/yelp-view-home.[ch]: 
	- Now draws an test-page. This should be made nicer.
	- The HTML-stuff is _not_ finished.
	- Signals path_selected when a user press a link.
	
	* src/yelp-view-doc.[ch]: removed, I must have been tired when
	  commiting this :)

	* src/yelp-view-content.[ch]: 
	- added
	- takes care of the content-view (the one with the tree to the
	  left).
	- This view is accessed from the home-view.
	
	* src/yelp-toc.[ch]: removed, now handled inside
	  yelp-view-content.[ch].
	
	* src/yelp-scrollkeeper.c:
	(ys_parse_book): only parse if Toplevel == GNOME.

	* src/yelp-index.[ch]: removed, this is now handled inside
	  yelp-view-index.c
	
	* src/yelp-view.[ch]: moved to yelp-html, yelp-view-* is the
	  various main-views.

	* src/yelp-html.[ch]: added, this is the previous yelp-view.[ch]

	* src/yelp-base.c: priv->bookshelf -> content_store.
	(yelp_base_get_bookshelf): removed, was used by YelpWindow, but
	  YelpWindow shouldn't know anything about YelpBase.
	(yelp_base_new_window): send the content_store to yelp_window_new
	  instead.

	* src/Makefile.am (yelp_SOURCES): updated to reflect the current
	  files.

2001-12-09  Pablo Saratxaga  <pablo@mandrakesoft.com>

	* configure.in: Added "az" entry to ALL_LINGUAS.

2001-12-09  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view-home.c: added, will be the Home-view.

	* src/yelp-doc-view.[ch]: moved to yelp-view-doc.[ch]
	
	* src/Makefile.am (yelp_SOURCES): use yelp-view* instead of
	  yelp-*-view.

2001-12-08  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-main.c (main): cast the window to YELP_WINDOW.

	* src/yelp-index.c: 
	- don't include yelp-keyword-db.h
	- cleaned up some comments.

	* src/yelp-base.c: 
	- don't include yelp-keyword-db.h
	- removed keyword_db from priv-struct.

	* src/yelp-keyword-db.[ch]: removed, should use only a GCompletion
	  plus the eventual support for ModelFilter in GtkTreeView.
	
	* src/Makefile.am (yelp_SOURCES): removed yelp-keyword-db.[ch].

	* TODO (FEATURES): updated.

	* src/yelp-util.c: removed the outcommented menu-code.
	- No menu will be used, only the toolbar. 
	- The window-generating code should probably be moved to glade
	  later.

	* src/yelp-util.[ch]: added, moved the insert-into-tree function
	  from yelp-section.[ch] here.

	* src/yelp-toc.c: 
	(yelp_toc_open): removed, unused and unimplemented. Can add it
	  back when I need it.

	* src/yelp-section.[ch]: 
	(yelp_section_add_sub): removed, functionality moved to
	  yelp-util.[ch]

	* src/yelp-scrollkeeper.[ch]: 
	- renamed from scrollkeeper-parser.[ch]
	- cleaned up, don't use the metadata-parser interface.
	- insert into the GtkTreeStore directly.

	* src/yelp-main.c: include yelp-window.h

	* src/yelp-base.c: 
	(yelp_base_new_book_cb): removed
	(yelp_base_insert_node): removed
	(yelp_base_section_foreach): removed
	(yelp_base_new): don't connect to parser signals, parser gets the
	  GtkTreeStore and can insert directly into it.

	* src/scrollkeeper-parser.[ch]: moved to yelp-scrollkeeper.[ch]

	* src/metadata.h: removed, was used to help including all the
	  metadata-parsers.

	* src/main.c: moved to yelp-main.c

	* src/metadata-parser.[ch]: removed, no need for this interface.

	* src/devhelp-parser.[ch]: removed, don't need to support this and
	  want the source to be as clean as possible.
	
	* src/Makefile.am (yelp_SOURCES): changed to build the correct
	  files after the move-around.

	* configure.in: changed AC_INIT argument to src/yelp-main.

	* autogen.sh (PKG_NAME): changed test for srcdir/main to
	  srcdir/yelp-main.

2001-12-07  Mikael Hallendal  <micke@codefactory.se>

	* src/Makefile.am (yelp_SOURCES): yelp-view -> yelp-doc-view.

	* src/yelp-window.c:
	- use yelp-doc-view instead of yelp-view.
	- update GUI after inspiration from M$ help.

	* src/yelp-doc-view.[ch]: renamed from yelp-view.[ch]

2001-12-05  Malcolm Tredinnick <malcolm@commsecure.com.au>
	* src/yelp-section.[ch]:
	- add a scheme member to YelpSection. Will usually be NULL,
	  except when adding URIs from Scrollkeeper.
	(yelp_section_new): pass in scheme as the last param.
	(yelp_section_copy): pass in extra param to yelp_section_new.

	* src/devhelp-parser.c, src/yelp-window.c: pass extra param in
	calls to yelp_section_new().

	* src/scrollkeeper-parser.c:
	- parse extra param to yelp_section_new().
	(sp_parse_doc): strip off the scheme from ScrollKeeper (usually
	"file:") before adding "ghelp:" to the URI. But save it in case
	we want act based on this scheme later.
	(sp_strip_scheme): new function to strip schemes.

	* docs/help-parsing.txt: New file, describing what we have to
	  handle. Mostly because I keep forgetting.

2001-12-04  Christian Meyer  <chrisime@gnome.org>

	* configure.in: Added "de" entry to ALL_LINGUAS.

2001-12-04  Malcolm Tredinnick <malcolm@commsecure.com.au>
	* src/yelp-window.c:
	remove obsolete include of ghelp-uri.h.
	(yelp_window_section_select_cb): There are YelpSections that
	don't have uris (section headings). Don't try to open them.

2001-12-04  Mikael Hallendal  <micke@codefactory.se>

	* src/ghelp-uri.[ch]: removed, old junk

	* src/ghelp-main.[c]: likewise

	* src/yelp-window.c:
	(yelp_window_populate): connect the history buttons.
	(yelp_window_history_button_pressed): added/impl.
	- use yelp_view_open_section instead.

	* src/yelp-view.c:
	(yelp_view_open_section): renamed from yelp_view_open_uri. Now
	  takes a section as argument instead.

	* src/yelp-section.c (yelp_section_new): allow name == NULL

	* src/yelp-window.c (yelp_window_populate): connect to the correct
	  button.
	(yelp_window_section_selected_cb): notify the history that we are
	  moving.
	
	* src/yelp-history.c (yelp_history_maybe_emit): no details when
	  emitting.

	* src/yelp-window.c: 
	- added forward/back-buttons to priv struct.
	- connect the buttons to forward/back-exists-toggled signals in
	  history.
	(yelp_window_toggle_history_buttons): added/impl. will handle when
	  forward/back signals are emitted from YelpHistory.

	* src/yelp-toc.h: YelpBook->GNode

	* src/yelp-section.[ch]: added to replace yelp-book.[ch]
	
	* src/yelp-history.[ch]: 
	- use YelpSections instead of strings.
	- renamed all functions to yelp_history instead of help_history.

	* src/yelp-book[ch]: removed, replaced with yelp-section.

	* src/yelp-base.c (yelp_base_new_book_cb): YelpBook->GNode

	* src/scrollkeeper-parser.c: 
	- lots of updates to stop using YelpBook.
	- YelpBook -> GNode
	- return GNode instead of YelpBook.
	- Use GNode insternaly instead of YelpBook.
	- now use yelp_section_add_sub instead of yelp_book_add_section.
	- also, yelp_section_new to get a new section to call
	  yelp_book_add_section with.
	
	* src/metadata.h: yelp-book.h -> yelp-section.h

	* src/metadata-parser.h: use a GNode in the new_book signal
	  instead of a YelpBook. I might remove this signal entirely and 
	  instead use a function that might return the root-node.

	* src/devhelp-parser.c: semi-updated, disabled for now

	* src/Makefile.am (yelp_SOURCES): 
	- don't compile devhelp-parser,
	- rename yelp-book to yelp-section

2001-12-02  Malcolm Tredinnick <malcolm@commsecure.com.au>
	* src/main.c (main): pass in GNOME_PROGRAM_STANDARD_PROPERTIES to
	  gnome_program_init().

	* src/Makefile.am: Add some defines for the install paths.

2001-12-01  Mikael Hallendal  <micke@codefactory.se>

	* src/scrollkeeper-parser.c:
	(sp_parse_toc_section): prepend ? to the anchor and chomp it.

	* src/yelp-view.c (yelp_view_open_uri): open the anchor if
  	  present.

	* src/yelp-window.c: removed comments left from the removal of
	  the uri-entry.
	
2001-12-01  Richard Hult  <rhult@codefactory.se>

	* src/main.c (main): Exit when the window is closed.

	* src/*.c: Mark strings as translatable.

	* src/main.c (main): Init gettext.

	* acconfig.h: Add.

	* configure.in: Gettextize and intltoolize.

	* autogen.sh: Redirect to the installed one for gnome 2.

	* yelp.desktop.in: Desktop file.

	* Makefile.am: Add a desktop file and intltool rule for it.

2001-12-01  Mikael Hallendal  <micke@codefactory.se>

	* src/scrollkeeper-parser.c: path uri's as strings instead of
	  GnomeVFSURI's

	* src/yelp-window.c: likewise

	* src/yelp-view.c: likewise

	* src/yelp-toc.c: likewise

	* src/yelp-index.c: likewise

	* src/yelp-book.c: likewise

	* src/yelp-base.c: likewise

	* TODO: updated.

	* src/yelp-window.c (yelp_window_populate): 
	- removed the uri-entry
	- added a toolbar

	* TODO: updated.

	* src/scrollkeeper-parser.c:
	(sp_parse_toc_section): chomp the name (otherwise it contains a
	newline).

2001-11-30  Mikael Hallendal  <micke@codefactory.se>

	* src/scrollkeeper-parser.c:
	Now handles TOC parsing, needs some fixing with the internal
	links.
	include yelp-book.h
	(sp_get_xml_tree_of_locale): removed
	(sp_parse_toc): renamed from sp_parse_doc_toc., implemented to now
	  parse the toc.
	(sp_parse_toc_section): added, impl.
	(sp_parse_section): renamed from sp_tree_parse_section.
	(sp_parse_doc): renamed from sp_tree_parse_doc
	(sp_parse_doc_toc): added (not impl. yet).
	(sp_get_xml_docpath): added. Handles retrieving the xml doc path
	 from a scrollkeeper-* output.
	(sp_get_xml_tree_of_locale): moved the
	 scrollkeeper-get-content-list stuff to sp_get_xml_docpath. Now use
	 it instead.

	* src/main.c (main): don't run gtk_init, using gnome-program.

	* src/scrollkeeper-parser.c: renamed internal functions to sp_ to
	  get the names shorter.

2001-11-27  Richard Hult  <rhult@codefactory.se>

	* src/scrollkeeper-parser.c: Include string.h to get rid of a
	warning.

	* src/*.h: Fix build by including glib-object.h instead of
	gobject/gobject.h everywhere. 

2001-11-16    <micke@codefactory.se>

        * vfs-help-module: removed, included in platform now.
	
	* configure.in: don't build vfs-help-module, it's now in libgnome.

	* Makefile.am (SUBDIRS): dito

	* src/yelp-view.c (yelp_view_url_requested_cb): GNOME_VFS_PRIORITY
	  fixed to work with resent changes in API.
	(yelp_view_open_uri): dito.

2001-10-29  Mikael Hallendal  <micke@codefactory.se>

	* src/main.c (main): if argument is passed, pass that argument to
	  yelp_window_open_uri.

	* src/yelp-window.c (yelp_window_open_uri): added/impl.

2001-10-28  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-window.c (yelp_window_uri_selected_cb): don't segfault
	if uri == NULL.
	
	* src/yelp-base.c (yelp_base_new): use the scrollkeeper parser
	instead of devhelp.

	* src/scrollkeeper-parser.c:
	(scrollkeeper_parser_parse): call _trim_ with doc->xmlRootNode.
	(scrollkeeper_parser_trim_empty_branches): now actually works.
	(scrollkeeper_parser_parse_book): don't call ..._tree_empty. All
	empty branches has been removed.
	(scrollkeeper_parser_tree_parse_section): dito.

	* src/yelp-book.c (yelp_book_section_new): accept uri == NULL and
	don't ref it, if it is.
	(yelp_book_add_section): accept uri == NULL.

	* src/scrollkeeper-parser.c: started work on building index from
	Scrollkeeper.

	* src/devhelp-parser.c (devhelp_parser_parse_book): use xmlChar
	instead of gchar.

	* vfs-help-module/help-method.c 
	(help_name_to_local_path): gnome_i18n_get_language_list returns
	const GList.

2001-10-27  Mikael Hallendal  <micke@codefactory.se>

	* src/yelp-view.c (yelp_view_open_uri): set the document to show
	  the beginning.

	* src/Makefile.am: 
	- Don't build ghelp-test.
	(yelp_SOURCES): don't include ghelp-uri.[ch].

